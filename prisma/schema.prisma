// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id             String   @id @default(uuid())
  telefono       String   @unique
  nombre_negocio String
  es_admin       Boolean  @default(false)
  tipo           String?
  correo         String   @unique
  contrasena     String
  habilitado     Boolean  @default(true)
  ofertas        Oferta[]
  jornadas       Jornada[]
}

model Oferta {
  id           Int     @id @default(autoincrement())
  producto     String
  precio       Json
  disponible   Boolean @default(true)
  sincronizado Boolean @default(false)
  negocio      User    @relation(fields: [negocio_id], references: [id])
  negocio_id   String
}

model OperacionFinalizada {
  id              Int           @id @default(autoincrement())
  fecha           DateTime
  items           Json
  total           Json
  sincronizado    Boolean       @default(false)
  tipoOperacion   TipoOperacion @relation(fields: [tipoOperacionId], references: [id])
  tipoOperacionId Int
  jornada         Jornada       @relation(fields: [jornadaId], references: [id])
  jornadaId       Int
}

model TipoOperacion {
  id                   Int                    @id @default(autoincrement())
  denominacion         String
  operacionesFinalizadas OperacionFinalizada[]
}

model Jornada {
  id                   Int                    @id @default(autoincrement())
  inicio               Json
  fechaInicio          DateTime
  fechaFin             DateTime?
  totalJornada         Json
  negocio              User                   @relation(fields: [negocio_id], references: [id])
  negocio_id           String
  operacionesFinalizadas OperacionFinalizada[]
}

model Producto {
  id       Int                @id @default(autoincrement())
  nombre   String
  cantidad Int
  entradas OperacionEntrada[]
}

model OperacionEntrada {
  id         Int      @id @default(autoincrement())
  producto   Producto @relation(fields: [productoId], references: [id])
  productoId Int
  cantidad   Int
  fecha      DateTime
}

model TazaCambio {
  id                 Int      @id @default(autoincrement())
  tazamoneda         Json
  fechaActualizacion DateTime
}

